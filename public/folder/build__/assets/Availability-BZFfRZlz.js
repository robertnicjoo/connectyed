import{q as u,d as l,e as t,F as h,l as b,n as c,v as m,h as p,o as d,t as _}from"./app-Cf285zSj.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y={data(){return{user:this.$store.state.auth.user.user,authorization:this.$store.state.auth.authorization,processing:!1,selectedDates:[{start_date:"",start_time:"",end_time:""}],rangeStart:"",rangeEnd:"",listAvailabilities:[]}},methods:{addNewDate(){this.selectedDates.push({start_date:"",start_time:"",end_time:""})},removeDate(s){this.selectedDates.splice(s,1)},removeAvailability(){console.log("remove availability")},async submitAvailability(){this.processing=!0;let s=[];this.selectedDates[0].start_date?(s=this.selectedDates.map(a=>({start_date:a.start_date,start_time:a.start_time,end_time:a.end_time})),this.rangeStart&&this.rangeEnd&&s.push({start_date:this.rangeStart,end_date:this.rangeEnd,start_time:null,end_time:null})):(this.rangeStart&&this.rangeEnd&&(s=[{start_date:this.rangeStart,end_date:this.rangeEnd,start_time:null,end_time:null}]),console.log("startdate not selected",this.selectedDates)),u.defaults.headers.common.Authorization=`Bearer ${this.authorization.token}`,await u.post("/api/availabilities",{user_id:this.user.id,availabilities:s}).then(({data:a})=>{alert("Availability saved successfully!"),this.selectedDates=[{start_date:"",start_time:"",end_time:""}],this.fetchAvailabilities()}).catch(a=>{console.error(a)}).finally(()=>{this.processing=!1})},formatDate(s){return new Date(s).toLocaleDateString()},formatTime(s){return new Date(`1970-01-01T${s}Z`).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},async fetchAvailabilities(){try{const s=await u.get("/api/availabilities/"+this.user.id);this.listAvailabilities=s.data.data}catch(s){console.error("Error fetching availabilities:",s)}}},created(){this.fetchAvailabilities()}},x={class:"max-w-7xl mx-auto p-6 bg-white rounded-sm shadow-xs"},f=t("h2",{class:"text-xl font-bold mb-4"},"Create Date Availability",-1),v={class:"mb-4"},D=t("label",{class:"block text-gray-700 font-bold mb-2"},"Select Dates:",-1),w=["onUpdate:modelValue"],k=["onUpdate:modelValue"],A=["onUpdate:modelValue"],S=["onClick"],E={class:"mb-4"},V=t("label",{class:"block text-gray-700 font-bold mb-2"},"Select Date Range:",-1),C={class:"flex items-center space-x-2"},T=t("span",null,"to",-1),U={class:"max-w-7xl mx-auto p-6 bg-white rounded-sm shadow-xs"},N=t("h2",{class:"text-xl font-bold mb-4"},"Availability List",-1),z={class:"display w-full max-w-7xl bg-white border border-gray-200 rounded-lg shadow-md"},B=t("thead",null,[t("tr",{class:"border-b bg-gray-100"},[t("th",{class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Start Date"),t("th",{class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"End Date"),t("th",{class:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",colspan:"2"},"Time")])],-1),L={class:"px-1 py-3 whitespace-nowrap"},R={key:0},F={class:"px-1 py-3 whitespace-nowrap"},q={key:0},M={class:"px-1 py-3 whitespace-nowrap"},Z={key:0},j={key:1},G={class:"px-1 py-3 whitespace-nowrap"},H=["onClick"];function I(s,a,J,K,r,o){return d(),l(h,null,[t("div",x,[f,t("div",v,[D,(d(!0),l(h,null,b(r.selectedDates,(e,i)=>(d(),l("div",{key:i,class:"flex items-center space-x-2 mb-2"},[c(t("input",{type:"date",class:"border border-gray-300 rounded p-2","onUpdate:modelValue":n=>r.selectedDates[i].start_date=n},null,8,w),[[m,r.selectedDates[i].start_date]]),c(t("input",{type:"time",class:"border border-gray-300 rounded p-2","onUpdate:modelValue":n=>r.selectedDates[i].start_time=n},null,8,k),[[m,r.selectedDates[i].start_time]]),c(t("input",{type:"time",class:"border border-gray-300 rounded p-2","onUpdate:modelValue":n=>r.selectedDates[i].end_time=n},null,8,A),[[m,r.selectedDates[i].end_time]]),t("button",{class:"text-red-500 hover:text-red-700",onClick:n=>o.removeDate(i)},"Remove",8,S)]))),128)),t("button",{onClick:a[0]||(a[0]=(...e)=>o.addNewDate&&o.addNewDate(...e)),class:"bg-blue-500 text-white font-bold py-2 px-4 rounded"}," Add Another Date ")]),t("div",E,[V,t("div",C,[c(t("input",{type:"date",class:"border border-gray-300 rounded p-2","onUpdate:modelValue":a[1]||(a[1]=e=>r.rangeStart=e)},null,512),[[m,r.rangeStart]]),T,c(t("input",{type:"date",class:"border border-gray-300 rounded p-2","onUpdate:modelValue":a[2]||(a[2]=e=>r.rangeEnd=e)},null,512),[[m,r.rangeEnd]])])]),t("button",{class:"mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded float-right",onClick:a[3]||(a[3]=(...e)=>o.submitAvailability&&o.submitAvailability(...e))}," Save Availability ")]),t("div",U,[N,t("table",z,[B,t("tbody",null,[r.listAvailabilities.length?(d(!0),l(h,{key:0},b(r.listAvailabilities,(e,i)=>(d(),l("tr",{key:i,class:"border-b"},[t("td",L,[e.start_date?(d(),l("p",R,_(o.formatDate(e.start_date)),1)):p("",!0)]),t("td",F,[e.end_date?(d(),l("p",q,_(o.formatDate(e.end_date)),1)):p("",!0)]),t("td",M,[e.start_time&&e.end_time?(d(),l("p",Z,"Time:"+_(o.formatTime(e.start_time))+" to "+_(o.formatTime(e.end_time)),1)):(d(),l("p",j))]),t("td",G,[t("button",{class:"text-red-500 hover:text-red-700",onClick:n=>o.removeAvailability(i)},"Remove",8,H)])]))),128)):p("",!0)])])])],64)}const Q=g(y,[["render",I]]);export{Q as default};
