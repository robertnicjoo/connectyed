import{_ as u,M as p,x as h,e as a,f as s,F as g,z as b,k as _,v as m,i as f,o as r,t as n,q as y,s as x}from"./app-D0Fdxhbm.js";const k={name:"Billing",data(){return{products:[{id:"tier1",name:"Tier 1 Dating Package",description:"A matchmaker sends the date for a 1 on 1 date with profile of the date with 1 photo (all other images blurry) and Description and Details are blurry",price:5e3,stripePriceId:"price_1Q8q4aFZef913bMWUE3mWRF2"},{id:"tier2",name:"Tier 2 Dating Package",description:"Date has all images and all profile details",price:1e4,stripePriceId:"price_1Q8q5IFZef913bMWHVXb99st"},{id:"tier3",name:"Tier 3 Dating Package",description:"Date has all images and profile details (client picks 1 of 2 date options)",price:17500,stripePriceId:"price_1Q8q89FZef913bMW1D2pUPso"}],processing:!1,showDiscountModal:!1,selectedProduct:null,discountCode:""}},computed:{...p({user:e=>e.auth.user.user,authorization:e=>e.auth.authorization})},methods:{openDiscountModal(e){this.selectedProduct=e,this.showDiscountModal=!0},closeDiscountModal(){this.showDiscountModal=!1,this.selectedProduct=null,this.discountCode=""},async confirmPurchase(){if(this.selectedProduct){this.processing=!0;try{const e={product_type:this.selectedProduct.id,price_id:this.selectedProduct.stripePriceId,discount_code:this.discountCode||null},t=await h.post("/api/billing/create-checkout-session",e,{headers:{Authorization:`Bearer ${this.authorization.token}`}});if(t.data.success){const{checkout_url:d}=t.data;window.location.href=d}else console.error("Failed to create checkout session:",t.data.message),alert(t.data.message||"Failed to create checkout session. Please try again.")}catch(e){console.error("Error creating checkout session:",e),e.response&&e.response.data&&e.response.data.message?alert(`Error: ${e.response.data.message}`):alert("An unexpected error occurred. Please try again later.")}finally{this.processing=!1,this.closeDiscountModal()}}}}},l=e=>(y("data-v-533945f2"),e=e(),x(),e),D={class:"container mx-auto p-4"},P=l(()=>s("h2",{class:"text-xl font-bold mb-4"},"Dating Packages",-1)),w={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},v={class:"text-lg font-semibold mb-2"},C={class:"text-gray-700 mb-4"},M={class:"text-xl font-bold mb-4"},F=["onClick","disabled"],I={key:0},B={key:1},z={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},E={class:"bg-white p-6 rounded-lg shadow-lg w-80"},S=l(()=>s("h3",{class:"text-lg font-semibold mb-4"},"Enter Discount Code",-1)),q={class:"flex justify-end"},T=["disabled"],V={key:0},W={key:1};function A(e,t,d,Q,i,c){return r(),a("div",D,[P,s("div",w,[(r(!0),a(g,null,b(i.products,o=>(r(),a("div",{key:o.id,class:"bg-white p-6 rounded-lg shadow"},[s("h3",v,n(o.name),1),s("p",C,n(o.description),1),s("p",M,"$"+n((o.price/100).toFixed(2)),1),s("button",{onClick:U=>c.openDiscountModal(o),disabled:i.processing,class:"w-full py-2 px-4 bg-blue-500 text-white rounded hover:bg-blue-600 transition duration-200 disabled:bg-blue-300","aria-label":"Purchase {{ product.name }}"},[i.processing?(r(),a("span",I,"Processing...")):(r(),a("span",B,"Purchase"))],8,F)]))),128))]),i.showDiscountModal?(r(),a("div",z,[s("div",E,[S,_(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.discountCode=o),type:"text",placeholder:"Discount Code",class:"w-full px-3 py-2 border rounded mb-4","aria-label":"Discount Code"},null,512),[[m,i.discountCode]]),s("div",q,[s("button",{onClick:t[1]||(t[1]=(...o)=>c.closeDiscountModal&&c.closeDiscountModal(...o)),class:"mr-2 px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400"}," Cancel "),s("button",{onClick:t[2]||(t[2]=(...o)=>c.confirmPurchase&&c.confirmPurchase(...o)),disabled:i.processing,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition duration-200 disabled:bg-blue-300"},[i.processing?(r(),a("span",V,"Processing...")):(r(),a("span",W,"Confirm"))],8,T)])])])):f("",!0)])}const j=u(k,[["render",A],["__scopeId","data-v-533945f2"]]);export{j as default};
